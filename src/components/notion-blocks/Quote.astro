---
import * as interfaces from '../../lib/interfaces.ts'
import { snakeToKebab } from '../../lib/style-helpers.ts'
import RichText from './RichText.astro'
import NotionBlocks from '../NotionBlocks.astro'
import '../../styles/notion-color.css'

export interface Props {
  block: interfaces.Block
  headings: interfaces.Block[]
}

const { block, headings } = Astro.props
---

<blockquote class={snakeToKebab(block.Quote.Color)}>
  {
    block.Quote.RichTexts.map((richText: interfaces.RichText) => (
      <RichText richText={richText} />
    ))
  }
  {
    block.Quote.Children && (
      <NotionBlocks blocks={block.Quote.Children} headings={headings} />
    )
  }
</blockquote>

<style>
  blockquote {
    margin: 1.5rem 0;
    padding: 1.5rem 1.5rem 1.5rem 2rem;
    border-left: 4px solid var(--color-primary);
    font-size: 1.1rem;
    line-height: 1.8;
    background: rgba(var(--accent), 0.05);
    border-radius: 0 var(--radius-md) var(--radius-md) 0;
    box-shadow: var(--shadow-sm);
  }

  /* カラーバリエーション */
  blockquote.gray {
    border-left-color: #9e9e9e;
    background: rgba(158, 158, 158, 0.05);
  }
  blockquote.brown {
    border-left-color: #795548;
    background: rgba(121, 85, 72, 0.05);
  }
  blockquote.orange {
    border-left-color: #ff9800;
    background: rgba(255, 152, 0, 0.05);
  }
  blockquote.yellow {
    border-left-color: #ffc107;
    background: rgba(255, 193, 7, 0.05);
  }
  blockquote.green {
    border-left-color: var(--color-primary);
    background: rgba(var(--accent), 0.05);
  }
  blockquote.blue {
    border-left-color: #2196f3;
    background: rgba(33, 150, 243, 0.05);
  }
  blockquote.purple {
    border-left-color: #9c27b0;
    background: rgba(156, 39, 176, 0.05);
  }
  blockquote.pink {
    border-left-color: #e91e63;
    background: rgba(233, 30, 99, 0.05);
  }
  blockquote.red {
    border-left-color: #f44336;
    background: rgba(244, 67, 54, 0.05);
  }

  /* ダークモード時の背景色 */
  :global(.dark) blockquote {
    background: rgba(var(--accent), 0.1);
  }

  :global(.dark) blockquote.gray {
    background: rgba(158, 158, 158, 0.1);
  }
  :global(.dark) blockquote.brown {
    background: rgba(121, 85, 72, 0.1);
  }
  :global(.dark) blockquote.orange {
    background: rgba(255, 152, 0, 0.1);
  }
  :global(.dark) blockquote.yellow {
    background: rgba(255, 193, 7, 0.1);
  }
  :global(.dark) blockquote.green {
    background: rgba(var(--accent), 0.1);
  }
  :global(.dark) blockquote.blue {
    background: rgba(33, 150, 243, 0.1);
  }
  :global(.dark) blockquote.purple {
    background: rgba(156, 39, 176, 0.1);
  }
  :global(.dark) blockquote.pink {
    background: rgba(233, 30, 99, 0.1);
  }
  :global(.dark) blockquote.red {
    background: rgba(244, 67, 54, 0.1);
  }

  @media (max-width: 640px) {
    blockquote {
      margin: 1.2rem 0;
      padding: 1.2rem 1.2rem 1.2rem 1.5rem;
      font-size: 1rem;
    }
  }
</style>
